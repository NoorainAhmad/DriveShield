<app-header [pages]="pages"></app-header>
<div class="container">
    <h1 style="text-align: center;">Update Password</h1>
  
    <!-- Error or Session Expired Message -->
    <div *ngIf="!userId || !name" class="error-message">
      <p>Session expired. Please log in again.</p>
    </div>
  
    <!-- Update Password Form -->
    <form
      *ngIf="userId && name"
      [formGroup]="updatePasswordForm"
      (ngSubmit)="onSubmit()"
    >
      <!-- Pre-filled Name -->
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" id="name" [value]="name" disabled />
      </div>
  
      <!-- Pre-filled User ID -->
      <div class="form-group">
        <label for="userId">User ID:</label>
        <input type="text" id="userId" [value]="userId" disabled />
      </div>
  
      <!-- Old Password -->
      <div class="form-group">
        <label for="oldPassword">Old Password:</label>
        <input
          type="password"
          id="oldPassword"
          formControlName="oldPassword"
          placeholder="Enter your current password"
        />
        <div
          *ngIf="
            updatePasswordForm.controls['oldPassword'].touched &&
            updatePasswordForm.controls['oldPassword'].invalid
          "
          class="error-text"
        >
          <p>Old password is required and must be at least 6 characters long.</p>
        </div>
      </div>
  
      <!-- New Password -->
      <div class="form-group">
        <label for="newPassword">New Password:</label>
        <input
          type="password"
          id="newPassword"
          formControlName="newPassword"
          placeholder="Enter your new password"
        />
        <div
          *ngIf="
            updatePasswordForm.controls['newPassword'].touched &&
            updatePasswordForm.controls['newPassword'].invalid
          "
          class="error-text"
        >
          <p>New password is required and must meet the criteria.</p>
        </div>
      </div>
  
      <!-- Confirm New Password -->
      <div class="form-group">
        <label for="confirmNewPassword">Confirm New Password:</label>
        <input
          type="password"
          id="confirmNewPassword"
          formControlName="confirmNewPassword"
          placeholder="Confirm your new password"
        />
        <div
          *ngIf="
            updatePasswordForm.controls['confirmNewPassword'].touched &&
            updatePasswordForm.controls['confirmNewPassword'].invalid
          "
          class="error-text"
        >
          <p>Confirm password is required and must match the new password.</p>
        </div>
      </div>
  
      <button type="submit" class="update-btn" [disabled]="updatePasswordForm.invalid">
        Update Password
      </button>
    </form>
    <button (click)="goBack()" class="back-link">Back</button>
  </div>
  
  <!-- Success Modal -->
  <div
    class="modal"
    [class.show]="showSuccessModal"
    tabindex="-1"
    role="dialog"
    *ngIf="showSuccessModal"
  >
    <div class="modal-content">
      <h2>Success</h2>
      <p>{{ modalMessage }}</p>
      <button (click)="closeModal()">Close</button>
    </div>
  </div>
  
  <!-- Error Modal -->
  <div
    class="modal"
    [class.show]="showErrorModal"
    tabindex="-1"
    role="dialog"
    *ngIf="showErrorModal"
  >
    <div class="modal-content">
      <h2>Error</h2>
      <p>{{ modalMessage }}</p>
      <button (click)="closeModal()">Close</button>
    </div>
  </div>
  